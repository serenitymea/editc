scoring:
  heuristic_weights:
    motion_p90: 0.30          # Вес сильных всплесков движения (90-й перцентиль). Больше = динамичнее сцены
    motion_peak_ratio: 0.02  # Вес резких пиков движения (max/mean). Ловит внезапные всплески
    beat_alignment: 0.18      # Насколько важно совпадение начала клипа с битом
    bass_energy: 0.15        # Влияние низких частот (дропы, драматургия)
    blur_inverse: 0.07       # Штраф за размытие (чем выше, тем больше приоритет резких кадров)
    buildup: 0.20             # Влияние нарастающей энергии (motion + audio momentum)
    rms_peak: 0.15           # Вес аудио пиков (громкие моменты)

  global_weights:
    motion: 0.42              # Общий вклад motion-фич (если используешь агрегирование)
    audio: 0.38               # Общий вклад аудио-фич
    visual: 0.08              # Общий вклад визуальных признаков
    context: 0.12             # Вклад временного контекста (позиция в видео, momentum)

windows:
  motion_window_seconds: 2.5      # Размер окна (в секундах) для анализа движения вокруг кадра
  temporal_window_frames: 5       # Окно (в кадрах) для расчёта временного контекста
  clip_search_step_seconds: 0.2   # Шаг перебора стартов клипа (меньше = точнее, но медленнее)
  flow_sample_fps_divider: 8     # Делитель FPS для расчёта optical flow (10 = считать 1 раз в 10 кадров)
  visual_sample_fps_divider: 5    # Как часто считать визуальные признаки

optical_flow:
  pyr_scale: 0.5      # Масштаб пирамиды (меньше = точнее, но медленнее)
  levels: 3           # Количество уровней пирамиды
  winsize: 12         # Размер окна поиска движения
  iterations: 3       # Итерации на каждом уровне
  poly_n: 5           # Размер области для аппроксимации полинома
  poly_sigma: 1.2     # Сглаживание для полинома
  flags: 0            # Флаги OpenCV (обычно 0)

video_processing:
  resize_height: 480          # До какой высоты уменьшать кадр перед анализом
  flow_resolution: [320, 180] # Разрешение для расчёта optical flow (меньше = быстрее)
  symmetry_max_width: 80     # Максимальная ширина при расчёте симметрии

face_detection:
  enabled: false       # Включить детекцию лиц (замедляет обработку)
  scale_factor: 1.3    # Параметр detectMultiScale (чувствительность)
  min_neighbors: 5     # Минимум соседей для подтверждения лица

clip_selection:
  overlap_decay_ratio: 0.6   # Насколько сильно штрафовать перекрывающиеся клипы (больше = меньше повторов)

ml:
  feature_order:  # Порядок признаков для ML-модели (важно не менять без переобучения)
    - motion_mean
    - motion_max
    - motion_p90
    - motion_std
    - motion_peak_ratio
    - rms_mean
    - rms_peak
    - rms_contrast
    - spectral_centroid
    - spectral_rolloff
    - mfcc_variance
    - bass_energy
    - vocal_probability
    - onset_density
    - beat_alignment_score
    - blur_score
    - edge_density
    - color_variance
    - avg_brightness
    - contrast_mean
    - face_present
    - face_size_ratio
    - symmetry
    - rule_of_thirds
    - text_presence
    - motion_momentum
    - audio_momentum
    - combined_buildup
    - relative_position
    - motion_derivative
    - duration

audio_loops:
  default: 1   # Сколько раз зацикливать аудио